<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/admin/layout}">
<div layout:fragment="content">
    <link rel="stylesheet" th:href="@{/static/css/calendar.css}">
    <div class="container-fluid">
        <div class="row">
            <div class="col">
                <br>
                <button class="btn" style="font-size: 50px;"> &lt; </button> <!-- dâú trái -->
                <br>
            </div>
            <div class="col">
                <div class="container-fluid text-center">
                    <br>
                    <br>
                    <span class="h2" th:text="${tableModel.getYear()}"></span><span class="h3">,</span> <span class="h3"
                        th:text="${tableModel.getMonthString()}"></span>
                </div>
            </div>
            <div class="col">
                <br>
                <button class="btn" style="float: right;font-size: 50px"> &gt; </button> <!-- dâú phải -->
                <br>
            </div>
        </div>



    </div>

    <body onload="createTable()"></body>
    <div id="container">

    </div>

    <script th:src="@{/static/js/jquery-3.5.1.min.js}"></script>
    <script th:inline="javascript">
        function createTable() {

            var tableModel = /*[[${ tableModel }]]*/ '';

            var cell = /*[[${ tableModel.getDaysInMonth() }]]*/ '';

            var addCell = /*[[${ tableModel.getFixDay() }]]*/ '';

            var daysOfMonth = cell;

            var dayInMonthCount = 26;

            var dayInPlanCount = 0;

            // var username = "Sebastian \"Fruity\" Applejuice";

            alert(/*[[${tableModel.getPlansInMonth().size()}]]*/ '');
            /*[[${tableModel.nextDayInPlanCount()}]]*/ '';

            var test = /*[[${ tableModel.getPlansInMonth().elementAt(tableModel.getDayInPlanCount()).getFirst()}]]*/ '' ;

            alert(test);



            // alert(daysOfMonth);

            // thiet lap container
            var container = document.getElementById("container");

            //thiet lap so o hang 1
            var countAddCell = addCell;
            var countTheRestCellOfFirstRow = 7 - countAddCell;

            // thiet lap so o con lai trong bang
            var countCells = cell - countTheRestCellOfFirstRow;

            // thiet lap so cot
            if (countCells > 6) var countColumn = 7;
            else var countColumn = 0;

            // thiet lap so dong con lai
            if (countColumn > 0) {
                var countRow = parseInt(countCells / countColumn);
                var soODura = countCells % countColumn;
            } else {
                var soODura = countCells;
            }

            // tao table
            var tagTable = document.createElement("table");
            //them thuoc tinh vao table
            tagTable.setAttribute("class", "table table-bordered");

            //DaysOfWeek
            var daysOW = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];
            var tagRow = document.createElement("tr");
            for (var i = 0; i < daysOW.length; i++) {
                var tagColumn = document.createElement("th");
                var textNode = document.createTextNode(daysOW[i]);
                tagColumn.appendChild(textNode);
                tagRow.appendChild(tagColumn);
            }
            tagTable.appendChild(tagRow);

            // thiet lap tay dong thu nhat
            var tagRow = document.createElement("tr");
            tagTable.appendChild(tagRow);
            // tao so o trong
            while (countAddCell--) {
                var tagColumn = document.createElement("td");
                tagRow.appendChild(tagColumn);
            }
            // tao so o con lai trong hang 1
            while (countTheRestCellOfFirstRow--) {
                var tagColumn = document.createElement("td");
                var textNode = document.createTextNode("new");
                var tagButton = document.createElement("button");
                tagButton.appendChild(textNode);
                tagButton.setAttribute("class", "btn btn-block");
                tagColumn.appendChild(tagButton);
                tagRow.appendChild(tagColumn);
            }


            // ve bang 
            for (var i = 0; i < countRow; i++) {
                var tagRow = document.createElement("tr");
                tagTable.appendChild(tagRow);

                for (var j = 0; j < countColumn; j++) {
                    var tagColumn = document.createElement("td");
                    var textNode = document.createTextNode(i + " - " + j);
                    var tagButton = document.createElement("button");
                    tagButton.appendChild(textNode);
                    tagButton.setAttribute("class", "btn btn-block");
                    tagColumn.appendChild(tagButton);
                    tagRow.appendChild(tagColumn);
                }
            }

            // ve so o du ra
            var tagRow = document.createElement("tr");
            if (soODura != 0) tagTable.appendChild(tagRow);
            while (soODura--) {
                var tagColumn = document.createElement("td");
                var textNode = document.createTextNode("new");
                var tagButton = document.createElement("button");
                tagButton.appendChild(textNode);
                tagColumn.appendChild(tagButton);
                tagButton.setAttribute("class", "btn btn-block");
                tagRow.appendChild(tagColumn);
            }

            // them table vao container
            container.appendChild(tagTable);
            return true;
        }
    </script>
</div>

</html>